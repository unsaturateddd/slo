<script>
// Словарь с переводами
const translations = {
  en: {
    language: "🌐 Language",
    profile: "👤 Profile",
    settings: "⚙️ Settings",
    back: "← Back",
    nicknameLabel: "Enter your nickname:",
    saveNickname: "Save",
    status: "Account Status:",
    chance: "Chance:",
  },
  ru: {
    language: "🌐 Язык",
    profile: "👤 Профиль",
    settings: "⚙️ Настройки",
    back: "← Назад",
    nicknameLabel: "Введите никнейм:",
    saveNickname: "Сохранить",
    status: "Статус аккаунта:",
    chance: "Шанс:",
  },
  hi: {
    language: "🌐 भाषा",
    profile: "👤 प्रोफ़ाइल",
    settings: "⚙️ सेटिंग्स",
    back: "← वापस",
    nicknameLabel: "अपना उपनाम दर्ज करें:",
    saveNickname: "सहेजें",
    status: "खाता स्थिति:",
    chance: "संभावना:",
  },
  pt: {
    language: "🌐 Idioma",
    profile: "👤 Perfil",
    settings: "⚙️ Configurações",
    back: "← Voltar",
    nicknameLabel: "Digite seu apelido:",
    saveNickname: "Salvar",
    status: "Status da conta:",
    chance: "Chance:",
  },
  es: {
    language: "🌐 Idioma",
    profile: "👤 Perfil",
    settings: "⚙️ Configuración",
    back: "← Atrás",
    nicknameLabel: "Ingrese su apodo:",
    saveNickname: "Guardar",
    status: "Estado de la cuenta:",
    chance: "Probabilidad:",
  }
};

// Функция для смены языка
function setLanguage(lang) {
  localStorage.setItem('siteLang', lang);
  const t = translations[lang];

  // Меняем текст в меню
  document.querySelector('.bot-item[onclick*="toggleLangMenu"]').innerText = t.language;
  document.querySelector('.bot-item[onclick*="openProfile"]').innerText = t.profile;
  document.querySelector('.bot-item[onclick*="toggleSettingsMenu"]').innerText = t.settings;
  document.querySelector('.back-button').innerText = t.back;

  // Меняем текст в профиле
  if (document.getElementById('nickname-label')) document.getElementById('nickname-label').innerText = t.nicknameLabel;
  if (document.getElementById('nickname-save-btn')) document.getElementById('nickname-save-btn').innerText = t.saveNickname;
  if (document.getElementById('label-status')) document.getElementById('label-status').innerText = t.status;
  if (document.getElementById('label-chance')) document.getElementById('label-chance').innerText = t.chance;
}

// Функция для отображения меню выбора языка
function toggleLangMenu() {
  const menu = document.getElementById('lang-optionss');
  if (!menu) {
    // Создаем контейнер для кнопок языков
    const container = document.createElement('div');
    container.id = 'lang-optionss';
    container.style.position = 'absolute';
    container.style.background = '#222';
    container.style.color = 'white';
    container.style.padding = '5px';
    container.style.marginTop = '5px';
    container.style.borderRadius = '5px';
    container.style.zIndex = '1000';
    document.querySelector('.bot-dropdown').appendChild(container);
    languages.forEach(l => {
      const btn = document.createElement('div');
      btn.style.cursor = 'pointer';
      btn.style.padding = '2px 5px';
      btn.innerText = l.flag + ' ' + l.name;
      btn.onclick = () => { setLanguage(l.code); container.style.display = 'none'; };
      container.appendChild(btn);
    });
  } else {
    menu.style.display = (menu.style.display === 'none' || menu.style.display === '') ? 'block' : 'none';
  }
}

// Определяем языки для кнопок
const languages = [
  {code:'en', name:'English', flag:'🇬🇧'},
  {code:'ru', name:'Русский', flag:'🇷🇺'},
  {code:'hi', name:'हिन्दी', flag:'🇮🇳'},
  {code:'pt', name:'Português', flag:'🇵🇹'},
  {code:'es', name:'Español', flag:'🇪🇸'}
];

// Загружаем язык при старте
window.onload = () => {
  const lang = localStorage.getItem('siteLang') || 'en';
  setLanguage(lang);
};
</script>
